/*! For license information please see bookstore-mfe.js.LICENSE.txt */
System.register(["react","react-dom","single-spa-react","styled-components"],(function(e,t){var n={},r={},o={},i={};return Object.defineProperty(n,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){r.default=e.default},function(e){o.default=e.default},function(e){i.default=e.default}],execute:function(){e((()=>{var e={626:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(601),o=n.n(r),i=n(314),s=n.n(i)()(o());s.push([e.id,"\nbutton.profile {\n  position: absolute;\n  top: 62%;\n  left: 3px;\n  font-size: 18px;\n}\n\nbutton {\n  background-color: #3700B3;\n  color: #fff;\n  border: none;\n  width: 92px;\n  border-radius: 10px;\n  padding: 4px;\n}\n\nbutton.delete {\n  background-color: #dd0074;\n\n}\n\n.container {\n    .loading {\n      background: antiquewhite;\n      padding: 20px;\n    }\n\n    border: 3px solid #3700B3;\n    height: 400px;\n    overflow: auto;\n    \n    .user-details {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n        padding: 10px;\n        border-bottom: 1px solid lightgray;\n      \n      label {\n        display: flex;\n        font-weight: bold;\n      }\n    }\n\n    .purchases {\n      display: flex;\n      flex-direction: column;\n      padding: 10px;\n\n      .total-amount {\n        display: flex;\n        flex-direction: row;\n        \n        .total-label {\n          font-size: 14px;\n          font-weight: bold;\n          text-decoration: underline;\n          padding-right: 12px;\n        }\n  \n        .total-value {\n          font-size: 16px;\n          font-weight: bold;\n        }\n      }\n\n      .books {\n        padding-left: 16px;\n        .subheading {\n          font-size: 14px;\n          font-weight: bold;\n          text-decoration: underline;\n        }\n        .book-details {\n          display: flex;\n          flex-direction: column;\n          font-size: 14px;\n          padding: 10px;\n          border-bottom: 1px solid lightgray;\n          \n          label {\n            display: flex;\n            flex-direction: row;\n            font-weight: bold;\n          }\n          \n          ul {\n            list-style-type: disc;\n          }\n        }\n      }\n    }\n    .scroll-label {\n      padding-top: 12px;\n    }\n}\n\n.element {\n  border: 1px solid lightgray;\n  padding: 20px;\n  font-size: 20px;\n\n  .details-wrapper {\n    height: 126px;\n  }\n\n  .details {\n      display: flex;\n      flex-direction: row;\n      \n      .button-details {\n          padding: 10px;\n      }\n      .info {\n          background-color: antiquewhite;\n          padding: 8px;\n          border-radius: 12px;\n          z-index: 10;\n      }\n\n      img {\n        height: 90px;\n      }\n  }\n\n  .button-submit {\n    padding-top: 120px;\n    margin-top: 10px;\n    text-align: center;\n  }\n\n  .button-submit.add {\n    display: flex;\n    justify-content: space-around;\n    padding-top: 82px;\n  }\n\n  .edit {\n    margin-right: 14px;\n  }\n}\n\n.element.edit {\n  border: 2px dashed #3700B3;\n  padding: 20px 20px 58px 20px;\n  margin-bottom: 10px;\n  font-size: 20px;\n}\n\n.element.add {\n  padding: 20px 20px 52px 20px;\n\n  .details {\n    height: 92px;\n\n    label {\n      display: flex;\n      width: 100%;\n      padding-bottom: 12px;\n    }\n  }\n}\n",""]);const a=s},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var u=this[a][0];null!=u&&(s[u]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);r&&s[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},228:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,s,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in i=Object(arguments[u]))n.call(i,c)&&(a[c]=i[c]);if(t){s=t(i);for(var l=0;l<s.length;l++)r.call(i,s[l])&&(a[s[l]]=i[s[l]])}}return a}},694:(e,t,n)=>{"use strict";var r=n(925);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},556:(e,t,n)=>{e.exports=n(694)()},925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},528:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(726),i=a(o),s=a(n(556));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scrollListener=n.scrollListener.bind(n),n.eventListenerOptions=n.eventListenerOptions.bind(n),n.mousewheelListener=n.mousewheelListener.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(e){}return e}},{key:"eventListenerOptions",value:function(){return this.props.useCapture,this.isPassiveSupported()?{useCapture:this.props.useCapture,passive:!0}:{passive:!1}}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,n=this.getParentElement(e),r=void 0;if(this.props.useWindow){var o=document.documentElement||document.body.parentNode||document.body,i=void 0!==t.pageYOffset?t.pageYOffset:o.scrollTop;r=this.props.isReverse?i:this.calculateOffset(e,i)}else r=this.props.isReverse?n.scrollTop:e.scrollHeight-n.scrollTop-n.clientHeight;r<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=n.scrollHeight,this.beforeScrollTop=n.scrollTop,"function"==typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),n=t.children,r=t.element,o=t.hasMore,s=(t.initialLoad,t.isReverse),a=t.loader,u=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,u&&u(t)};var l=[n];return o&&(a?s?l.unshift(a):l.push(a):this.defaultLoader&&(s?l.unshift(this.defaultLoader):l.push(this.defaultLoader))),i.default.createElement(r,c,l)}}]),t}(o.Component);u.propTypes={children:s.default.node.isRequired,element:s.default.node,hasMore:s.default.bool,initialLoad:s.default.bool,isReverse:s.default.bool,loader:s.default.node,loadMore:s.default.func.isRequired,pageStart:s.default.number,ref:s.default.func,getScrollParent:s.default.func,threshold:s.default.number,useCapture:s.default.bool,useWindow:s.default.bool},u.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=u,e.exports=t.default},420:(e,t,n)=>{e.exports=n(528)},20:(e,t,n)=>{"use strict";n(228);var r=n(726),o=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),t.Fragment=i("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:l,props:i,_owner:s.current}}t.jsx=c,t.jsxs=c},848:(e,t,n)=>{"use strict";e.exports=n(20)},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},s=[],a=0;a<e.length;a++){var u=e[a],c=r.base?u[0]+r.base:u[0],l=i[c]||0,d="".concat(c," ").concat(l);i[c]=l+1;var p=n(d),f={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var h=o(f,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:h,references:1})}s.push(d)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=n(i[s]);t[a].references--}for(var u=r(e,o),c=0;c<i.length;c++){var l=n(i[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=u}}},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},726:e=>{"use strict";e.exports=n},867:e=>{"use strict";e.exports=r},238:e=>{"use strict";e.exports=o},815:e=>{"use strict";e.exports=i}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nc=void 0;var a={};return(()=>{"use strict";s.r(a),s.d(a,{bootstrap:()=>le,mount:()=>de,unmount:()=>pe});var e=s(726),t=s(867),n=s(238),r=s(848),o=s(72),i=s.n(o),u=s(825),c=s.n(u),l=s(659),d=s.n(l),p=s(56),f=s.n(p),h=s(540),v=s.n(h),b=s(113),m=s.n(b),g=s(626),y={};y.styleTagTransform=m(),y.setAttributes=f(),y.insert=d().bind(null,"head"),y.domAPI=c(),y.insertStyleElement=v(),i()(g.A,y),g.A&&g.A.locals&&g.A.locals;const x=(0,e.createContext)({});var w;const j=s(815).default.div.withConfig({displayName:"Header",componentId:"sc-1o134j1-0"})(w||(S=["\n  font-size: ","px;\n  font-weight: 600;\n"],k=["\n  font-size: ","px;\n  font-weight: 600;\n"],Object.defineProperty?Object.defineProperty(S,"raw",{value:k}):S.raw=k,w=S),(function(e){return e.theme.fontSizes.md}));var S,k,_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)};const P=function(t){var n=t.book.id,o=(0,e.useState)(t.book.title),i=o[0],s=o[1],a=(0,e.useState)(t.book.author),u=a[0],c=a[1],l=(0,e.useState)(t.book.price),d=l[0],p=l[1],f=(0,e.useState)(t.book.cover_url)[0],h=(0,e.useState)(""),v=h[0],b=h[1];return(0,r.jsx)("div",_({className:"element edit"},{children:(0,r.jsx)("div",_({style:{height:"200px"}},{children:(0,r.jsxs)("form",_({onSubmit:function(e){e.preventDefault(),t.onSubmit({id:n,title:i,author:u,price:d,cover_url:f,genre:v})}},{children:[(0,r.jsxs)("div",_({className:"details"},{children:[(0,r.jsx)("img",{src:t.book.cover_url,alt:i}),(0,r.jsxs)("div",_({style:{height:"10px"}},{children:[(0,r.jsxs)("label",{children:["Title:",(0,r.jsx)("input",{type:"text",value:i,onChange:function(e){return s(e.target.value)}})]}),(0,r.jsxs)("label",{children:["Author:",(0,r.jsx)("input",{type:"text",value:u,onChange:function(e){return c(e.target.value)}})]}),(0,r.jsxs)("label",{children:["Genre:",(0,r.jsxs)("select",_({value:v,onChange:function(e){return b(e.target.value)}},{children:[(0,r.jsx)("option",_({value:""},{children:"Select a genre"})),(0,r.jsx)("option",_({value:"Science Fiction"},{children:"Science Fiction"})),(0,r.jsx)("option",_({value:"History"},{children:"History"})),(0,r.jsx)("option",_({value:"Fantasy"},{children:"Fantasy"}))]}))]}),(0,r.jsxs)("label",{children:["Price:",(0,r.jsx)("input",{type:"number",value:d,onChange:function(e){return p(e.target.value)}})]})]}))]})),(0,r.jsx)("div",_({className:"button-submit"},{children:(0,r.jsx)("button",_({type:"submit"},{children:"Submit"}))}))]}))}))}))};var O=s(420),L=s.n(O),T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T.apply(this,arguments)},E=0;const C=function(t){var n=E++,o=(0,e.useState)(""),i=o[0],s=o[1],a=(0,e.useState)(""),u=a[0],c=a[1],l=(0,e.useState)(""),d=l[0],p=l[1],f=(0,e.useState)(""),h=f[0],v=f[1];return(0,r.jsx)("div",T({className:"element add"},{children:(0,r.jsxs)("form",T({onSubmit:function(e){e.preventDefault(),i||u||d?t.onSubmit({id:n,title:i,author:u,price:d,genre:h}):alert("Please fill in at least one field before submitting.")}},{children:[(0,r.jsx)("div",T({className:"details"},{children:(0,r.jsxs)("div",T({style:{height:"10px"}},{children:[(0,r.jsxs)("label",{children:["Title:",(0,r.jsx)("input",{type:"text",value:i,onChange:function(e){return s(e.target.value)}})]}),(0,r.jsxs)("label",{children:["Author:",(0,r.jsx)("input",{type:"text",value:u,onChange:function(e){return c(e.target.value)}})]}),(0,r.jsxs)("label",{children:["Genre:",(0,r.jsxs)("select",T({value:h,onChange:function(e){return v(e.target.value)}},{children:[(0,r.jsx)("option",T({value:""},{children:"Select a genre"})),(0,r.jsx)("option",T({value:"Science Fiction"},{children:"Science Fiction"})),(0,r.jsx)("option",T({value:"History"},{children:"History"})),(0,r.jsx)("option",T({value:"Fantasy"},{children:"Fantasy"}))]}))]}),(0,r.jsxs)("label",{children:["Price:",(0,r.jsx)("input",{type:"number",value:d,onChange:function(e){return p(e.target.value)}})]})]}))})),(0,r.jsxs)("div",T({className:"button-submit add"},{children:[(0,r.jsx)("button",T({onClick:t.onCancel},{children:"Cancel"})),(0,r.jsx)("button",T({type:"submit"},{children:"Add"}))]}))]}))}))};var N=function(){return N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},N.apply(this,arguments)},R=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},I=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const z=function(){var t=this,n=(0,e.useState)([]),o=n[0],i=n[1],s=(0,e.useState)(null),a=s[0],u=s[1],c=(0,e.useState)(null),l=c[0],d=c[1],p=(0,e.useState)(!0),f=p[0],h=p[1],v=(0,e.useState)(!1),b=v[0],m=v[1],g=(0,e.useState)(!1),y=g[0],w=g[1],S=(0,e.useState)(!1),k=S[0],_=S[1],O=(0,e.useState)(!1),T=O[0],E=O[1],z=(0,e.useState)(!1),A=z[0],H=z[1],W=(0,e.useState)(!1),D=W[0],F=W[1],B=(0,e.useState)(null),G=B[0],U=B[1],J=(0,e.useContext)(x);(0,e.useEffect)((function(){R(t,void 0,void 0,(function(){var e,t,n;return M(this,(function(r){switch(r.label){case 0:return[4,J.findBooks({page:1,perPage:5})];case 1:return e=r.sent(),t=e.data,(n=e.error)&&(h(!1),F(!0),U(n),console.log("Error while finding books: ",n),setTimeout((function(){window.location.reload()}),1e3)),t&&(console.log("useEffect setBooks..."),i(t)),[2]}}))}))}),[J]);var q=function(e){return R(t,void 0,void 0,(function(){return M(this,(function(t){switch(t.label){case 0:return[4,J.editBook(e)];case 1:return t.sent(),i((function(t){return t.map((function(t){return t.id===e.id?e:t}))})),u(null),_(!1),[2]}}))}))};return(0,r.jsxs)("div",N({className:"container"},{children:[!T&&!D&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L(),N({pageStart:0,loadMore:function(e){!b&&o.length>0&&function(e){R(t,void 0,void 0,(function(){var t,n,r;return M(this,(function(s){switch(s.label){case 0:m(!0),s.label=1;case 1:return s.trys.push([1,3,,4]),A&&(e+=1,H(!1)),[4,J.findBooks({page:e,perPage:5})];case 2:if(t=s.sent(),n=t.data,(r=t.error)&&(h(!1),F(!0),U(r),console.log("Error while finding books: ",r),setTimeout((function(){window.location.reload()}),1e3)),n){if(void 0===n)return h(!1),[2];if(0===(null==n?void 0:n.length))return h(!1),[2];i(I(I([],o,!0),n,!0)),m(!1)}return[3,4];case 3:return s.sent(),h(!1),[2];case 4:return[2]}}))}))}(e)},hasMore:f,useWindow:!1},{children:(0,r.jsxs)("div",N({style:{height:"400px"}},{children:[null==o?void 0:o.map((function(e){return(0,r.jsxs)("div",N({className:"element"},{children:[a===e.id&&k?(0,r.jsx)(P,{book:e,onSubmit:q}):(0,r.jsxs)("div",N({className:"details-wrapper"},{children:[(0,r.jsx)(j,{children:e.title}),(0,r.jsxs)("div",N({className:"details"},{children:[!e.cover_url&&(0,r.jsx)("img",{src:"https://via.placeholder.com/50",alt:e.title}),e.cover_url&&(0,r.jsx)("img",{src:e.cover_url,alt:e.title}),(0,r.jsx)("div",N({className:"button-details"},{children:(0,r.jsx)("button",N({onClick:function(){return t=e.id,d(t),void w(!y);var t}},{children:l===e.id&&y?"- Details":"+ Details"}))})),l===e.id&&y&&(0,r.jsxs)("div",N({className:"info"},{children:[(0,r.jsxs)("p",{children:["Author: ",e.author]}),(0,r.jsxs)("p",{children:["Genre: ",e.genre]}),(0,r.jsxs)("p",{children:["Price: ",e.price]})]}))]}))]})),(0,r.jsx)("button",N({onClick:function(){return t=e.id,u(t),void _(!k);var t},className:"edit"},{children:a===e.id&&k?"Cancel":"Edit"})),!k&&(0,r.jsx)("button",N({onClick:function(){return n=e.id,R(t,void 0,void 0,(function(){return M(this,(function(e){return i(o.filter((function(e){return e.id!==n}))),[2]}))}));var n},className:"delete"},{children:"Delete"}))]}),e.id)})),b&&f&&(0,r.jsx)("div",N({className:"loading"},{children:"Loading..."}))]}))})),(0,r.jsx)("button",N({style:{position:"absolute",fontSize:"18px",marginTop:"12px"},onClick:function(){E(!T)}},{children:"Add Book"}))]}),T&&(0,r.jsx)(C,{onSubmit:function(e){return R(t,void 0,void 0,(function(){return M(this,(function(t){switch(t.label){case 0:return[4,J.addBook(e)];case 1:return t.sent(),i((function(t){return I([e],t,!0)})),H(!0),E(!1),[2]}}))}))},onCancel:function(){E(!1)}}),!T&&!D&&(0,r.jsx)("div",N({className:"scroll-label"},{children:(0,r.jsx)("span",N({style:{position:"absolute",left:"120px"}},{children:"Scroll down to see more books!!"}))})),D&&(0,r.jsxs)(r.Fragment,{children:[G&&(0,r.jsxs)("p",{children:["Error code: ",G.code]}),(0,r.jsx)("p",{children:"Something went wrong. Application is restarting..."})]})]}))};var A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)};const H=function(){var t=this,n=(0,e.useState)([]),o=n[0],i=n[1],s=(0,e.useState)(),a=s[0],u=s[1],c=o.reduce((function(e,t){return e+t.books.reduce((function(e,t){return e+t.price}),0)}),0),l=(0,e.useContext)(x);return(0,e.useEffect)((function(){var e,n,r,o;e=t,n=void 0,o=function(){var e;return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(t){switch(t.label){case 0:return[4,l.findPurchases()];case 1:return(e=t.sent().data)&&(u(e[0].user),i(e)),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}u((o=o.apply(e,n||[])).next())}))}),[l]),(0,r.jsxs)("div",A({className:"container"},{children:[(0,r.jsxs)("div",A({className:"user-details"},{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"User: "}),null==a?void 0:a.name]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Email: "}),null==a?void 0:a.email]})]})),(0,r.jsxs)("div",A({className:"purchases"},{children:[(0,r.jsx)(j,{children:"My Purchases"}),(0,r.jsxs)("div",A({className:"total-amount"},{children:[(0,r.jsx)("div",A({className:"total-label"},{children:"Total amount spent: "})),(0,r.jsx)("div",A({className:"total-value"},{children:c}))]})),(0,r.jsxs)("div",A({className:"books"},{children:[(0,r.jsx)("label",A({className:"subheading"},{children:"Books"})),null==o?void 0:o.map((function(e){return e.books.map((function(e){return(0,r.jsx)("div",A({className:"book-details"},{children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{children:"Title: "}),(0,r.jsx)("div",{children:e.title})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{children:"Genre: "}),(0,r.jsx)("div",{children:e.genre})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("label",{children:"Price: "}),(0,r.jsx)("div",{children:e.price})]})]})}),e.id)}))}))]}))]}))]}))};function W(e){return void 0===e&&(e=1e3),new Promise((function(t){setTimeout(t,e)}))}const D=JSON.parse('{"b":[{"id":1,"title":"Lord of the Rings - The fellowship of the ring","author":"J.R.R. Tolkien","price":49.99,"cover_url":"https://m.media-amazon.com/images/I/51HNV1J3UyL._SL500_.jpg"},{"id":2,"title":"Lord of the Rings - The two towers","author":"J.R.R. Tolkien","price":39.99,"cover_url":"https://m.media-amazon.com/images/I/41sMe18lj+L._SL500_.jpg"},{"id":3,"title":"Lord of the Rings - The return of the king","author":"J.R.R. Tolkien","price":45.99,"cover_url":"https://m.media-amazon.com/images/I/51VYSm49SUL._SL500_.jpg"},{"id":4,"title":"The Name of the Wind","author":"Patrick Rothfuss","price":29.99,"cover_url":"https://m.media-amazon.com/images/I/51em3xUxHOL._SL500_.jpg"},{"id":5,"title":"The Wise Man\'s Fear","author":"Patrick Rothfuss","price":31.99,"cover_url":"https://m.media-amazon.com/images/I/51kmKNL3onS._SL500_.jpg"},{"id":6,"title":"Ulysses","author":"James Joyce","price":15.99,"cover_url":"https://m.media-amazon.com/images/I/51wXnnmofWL._SL500_.jpg"},{"id":7,"title":"Don Quixote","author":"Miguel de Cervantes","price":14.49,"cover_url":"https://m.media-amazon.com/images/I/41y3GywL1lL._SL500_.jpg"},{"id":8,"title":"The Divine Comedy","author":"Dante Alighieri","price":23.49,"cover_url":"https://m.media-amazon.com/images/I/31nCuk0puCL._SL500_.jpg"},{"id":9,"title":"Pride and Prejudice","author":"Jane Austen","price":12.99,"cover_url":"https://m.media-amazon.com/images/I/416K+gR7RLL._SL500_.jpg"},{"id":10,"title":"Harry Potter and the Philosopher\'s Stone","author":"Jane Austen","price":9.99,"cover_url":"https://m.media-amazon.com/images/I/513-uMNY0TL._SL500_.jpg"}],"p":[{"user":{"name":"Guillermo Gallo","email":"guille.gallo88@gmail.com"},"books":[{"id":1,"title":"Lord of the Rings - The fellowship of the ring","author":"J.R.R. Tolkien","price":49.99,"cover_url":"https://m.media-amazon.com/images/I/51HNV1J3UyL._SL500_.jpg","genre":"Fantasy"},{"id":2,"title":"Lord of the Rings - The two towers","author":"J.R.R. Tolkien","price":39.99,"cover_url":"https://m.media-amazon.com/images/I/41sMe18lj+L._SL500_.jpg","genre":"Fantasy"},{"id":3,"title":"Lord of the Rings - The return of the king","author":"J.R.R. Tolkien","price":45.99,"cover_url":"https://m.media-amazon.com/images/I/51VYSm49SUL._SL500_.jpg","genre":"Fantasy"}]}]}');var F;function B(){return Math.random()>.7}!function(e){e.SOMETHING_WENT_WRONG="0001"}(F||(F={}));var G,U=(G=function(e,t){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},G(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});const J=function(e){function t(t,n,r,o,i,s){var a=e.call(this,t)||this;return a.title="",a.author="",a.price=0,a.cover_url="",a.genre="",a.title=n,a.author=r,a.price=o,a.cover_url=i,a.genre=s,a}return U(t,e),t}((function(e){this.id=e}));var q=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Y=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},V=function(){return new Promise((function(e,t){var n=window.indexedDB.open("bookstore",1);n.onerror=function(e){t("Error opening database")},n.onsuccess=function(t){var n=t.target.result;e(n)},n.onupgradeneeded=function(e){var t=e.target.result,n=t.createObjectStore("books",{keyPath:"id",autoIncrement:!0});n.createIndex("title","title",{unique:!1}),n.createIndex("genre","genre",{unique:!1});var r=t.createObjectStore("purchases",{keyPath:"id",autoIncrement:!0});r.createIndex("user","user",{unique:!1}),r.createIndex("books","books",{unique:!1})}}))},K=function(){return q(void 0,void 0,Promise,(function(){var e,t,n,r;return Y(this,(function(o){switch(o.label){case 0:return[4,V()];case 1:return e=o.sent(),t=e.transaction("books","readonly"),n=t.objectStore("books"),r=n.getAll(),[2,new Promise((function(e,t){r.onsuccess=function(t){e(t.target.result)},r.onerror=function(e){t("Error fetching books")}}))]}}))}))},$=function(e){return q(void 0,void 0,void 0,(function(){var t,n;return Y(this,(function(r){switch(r.label){case 0:return[4,V()];case 1:return t=r.sent(),(n=t.transaction("books","readwrite")).objectStore("books").put(e),[2,new Promise((function(e,t){n.oncomplete=function(){e()},n.onerror=function(e){t("Error editing book")},n.onabort=function(e){t("Transaction aborted")}}))]}}))}))},Q=function(e){return q(void 0,void 0,void 0,(function(){var t,n;return Y(this,(function(r){switch(r.label){case 0:return[4,V()];case 1:return t=r.sent(),(n=t.transaction("books","readwrite")).objectStore("books").add(e),[2,new Promise((function(e,t){n.oncomplete=function(){e()},n.onerror=function(e){t("Error adding book")},n.onabort=function(e){t("Transaction aborted")}}))]}}))}))};function X(e){var t=void 0===e?{}:e,n=t.page,r=void 0===n?1:n,o=t.perPage,i=void 0===o?25:o;return q(this,void 0,void 0,(function(){var e,t,n=this;return Y(this,(function(o){switch(o.label){case 0:return[4,W()];case 1:return o.sent(),B()?[2,{error:{code:F.SOMETHING_WENT_WRONG}}]:(e=function(e){var t=(r-1)*i,n=Math.min(t+i,e.length);t>n&&(t-=i);var o=e.slice(t,n).map((function(e){return new J(e.id,e.title,e.author,e.price,e.cover_url,e.genre)}));return{data:o.length?o:[]}},t=function(){return q(n,void 0,void 0,(function(){var t,n,r,o=this;return Y(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,K()];case 1:return 0!==(t=i.sent()).length?[3,4]:[4,Promise.all(D.b.map((function(e){return q(o,void 0,void 0,(function(){return Y(this,(function(t){switch(t.label){case 0:return[4,Q(e)];case 1:return t.sent(),[2]}}))}))})))];case 2:return i.sent(),n=e,[4,K()];case 3:return[2,n.apply(void 0,[i.sent()])];case 4:return t.length>0?[2,e(t)]:[3,6];case 5:return r=i.sent(),console.error("Error while fetching books: ",r),[3,6];case 6:return[2]}}))}))},[4,t()]);case 2:return[2,o.sent()]}}))}))}function Z(e){var t=e.id;return q(this,void 0,void 0,(function(){return Y(this,(function(e){switch(e.label){case 0:return[4,(n=t,q(void 0,void 0,void 0,(function(){var e,t;return Y(this,(function(r){switch(r.label){case 0:return[4,V()];case 1:return e=r.sent(),(t=e.transaction("books","readwrite")).objectStore("books").delete(n),[2,new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(e){n("Error deleting book")},t.onabort=function(e){n("Transaction aborted")}}))]}}))})))];case 1:return e.sent(),[2]}var n}))}))}function ee(e){return q(this,void 0,void 0,(function(){return Y(this,(function(t){switch(t.label){case 0:return[4,Q(e)];case 1:return t.sent(),[2]}}))}))}function te(e){return q(this,void 0,void 0,(function(){return Y(this,(function(t){switch(t.label){case 0:return[4,$(e)];case 1:return t.sent(),[2]}}))}))}var ne=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},re=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},oe=function(){return new Promise((function(e,t){var n=window.indexedDB.open("bookstore",1);n.onerror=function(e){t("Error opening database")},n.onsuccess=function(t){var n=t.target.result;e(n)},n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("books")||t.createObjectStore("books",{keyPath:"id"}),t.objectStoreNames.contains("purchases")||t.createObjectStore("purchases",{keyPath:"id"})}}))},ie=function(){return ne(void 0,void 0,Promise,(function(){var e,t,n,r;return re(this,(function(o){switch(o.label){case 0:return[4,oe()];case 1:return e=o.sent(),t=e.transaction("purchases","readonly"),n=t.objectStore("purchases"),r=n.getAll(),[4,new Promise((function(e,t){r.onsuccess=function(){return e(r.result)},r.onerror=function(){return t(r.error)}}))];case 2:return[2,o.sent()]}}))}))};function se(){return ne(this,void 0,void 0,(function(){var e,t=this;return re(this,(function(n){switch(n.label){case 0:return[4,W()];case 1:return n.sent(),B()?[2,{error:{code:F.SOMETHING_WENT_WRONG}}]:(e=function(){return ne(t,void 0,void 0,(function(){var e,t,n=this;return re(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),[4,ie()];case 1:return 0!==(e=r.sent()).length?[3,4]:[4,Promise.all(D.p.map((function(e){return ne(n,void 0,void 0,(function(){return re(this,(function(t){switch(t.label){case 0:return[4,(n=e,ne(void 0,void 0,Promise,(function(){var e,t;return re(this,(function(r){switch(r.label){case 0:return[4,oe()];case 1:return e=r.sent(),(t=e.transaction("purchases","readwrite")).objectStore("purchases").add(n),[2,new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(e){n("Error adding purchase")},t.onabort=function(e){n("Transaction aborted")}}))]}}))})))];case 1:return t.sent(),[2]}var n}))}))})))];case 2:return r.sent(),[4,ie()];case 3:return[2,{data:e=r.sent()}];case 4:return e.length>0?[2,{data:e}]:[3,6];case 5:return t=r.sent(),console.error(t),[3,6];case 6:return[2]}}))}))},[4,e()]);case 2:return[2,n.sent()]}}))}))}var ae=function(){return ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ae.apply(this,arguments)};const ue=function(){var t=(0,e.useState)(!1),n=t[0],o=t[1];return(0,r.jsxs)(x.Provider,ae({value:{findBooks:X,addBook:ee,editBook:te,deleteBook:Z,findPurchases:se}},{children:[n?(0,r.jsx)(H,{}):(0,r.jsx)(z,{}),(0,r.jsx)("button",ae({className:"profile",onClick:function(){o(!n)}},{children:n?"Return":"My Profile"}))]}))};var ce=(0,n.default)({React:e.default,ReactDOM:t.default,rootComponent:function(e){return(0,r.jsx)(ue,{})},errorBoundary:function(e,t,n){return null}}),le=ce.bootstrap,de=ce.mount,pe=ce.unmount})(),a})())}}}));